<div class="tag-filters" data-testid="filters_container">
	<dl class="filters" data-bind="sortable: {
		foreach: filter.filters,
		options: {'group': 'filters'}
	}">
		<dd class="filter">
			<span class="in-amount" data-bind="text: $data.getInLength()"></span>
			<dl class="filter-tags" data-bind="sortable: {
				foreach: $data.filters,
				options: {'group': 'filters'}
			}">
				<dd class="filter-tag" data-bind="css: {
					'tag-includes': $data.action() === $data.ACTION_ADD,
					'tag-excludes': $data.action() === $data.ACTION_RMV
				}">
					<span class="tag-action" data-bind="click: $data.toggleAction.bind($data)"></span>
					<span class="tag-name" data-bind="text: $data.tag"></span>
				</dd>
			</dl>
			<span class="out-amount" data-bind="text: $data.getOutLength()"></span>
		</dd>
	</dl>

	<div class="tags-menu">

		<input data-bind="value: $widget.filterFilter, valueUpdate:'keyup'" placeholder="Filter Tags">

		<dl class="tags-list" data-bind="foreach: {data: $widget.tags, as: 'tag'}, visible: $widget.filterActivated">
			<dd data-bind="attr: {rel: tag.substr(1)}">
				<label class="checkbox" data-bind="attr: {title: tag, for: 'checkbox_' + tag.substr(1) + '_in'}">
					<input type="checkbox" class="filter-checkbox include-checkbox" data-bind="testId: ['tagFilter', 'filterIn', tag], checkedValue: tag, checked: $widget.includedTags, attr: {id: 'checkbox_' + tag.substr(1) + '_in'}" />
					<input type="checkbox" class="filter-checkbox exclude-checkbox" data-bind="testId: ['tagFilter', 'filterOut', tag], checkedValue: tag, checked: $widget.excludedTags" />
					<span data-bind="text: tag"></span>
				</label>
			</dd>
		</dl>
	</div>
</div>